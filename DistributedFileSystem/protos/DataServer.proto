syntax = "proto3";

package DataServer;

service DataService{
    rpc ReadBlock(BlockInfo) returns (stream BlockUnit) {}
    rpc WriteBlock(stream BlockUnit) returns (BlockInfo) {}
}

message BlockInfo{
    string fileName = 1;
    uint64 blockIdx = 2;
    uint64 blockSize = 3;
    bytes blockHash = 4;
}

message BlockUnit{
    string fileName = 1;
    uint64 blockIdx = 2;
    uint64 unitIdx = 3;
    bytes unitData = 4;
    bool lastUnit = 5;
}
